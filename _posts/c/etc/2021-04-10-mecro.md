---
layout: post
title:  "[C]매크로(mecro)"
subtitle:   ""
date: 2021-04-10 04:45:51 +0900
categories: c
tags: etc
comments: true 
---
<style>
    aa {
        font-weight: bold;
        color: #60fc52;
    }
    bb {
        font-weight: bold;
        color: #e97dff;
    }
    cc {
        font-weight: bold;
        color: #e6dd6d;
    }
</style>
이번 포스트는 **매크로(mecro)**에 관한 내용입니다.

* * *
<h1>1️⃣ #define &#38; #undef</h1>
<h2 style="color:#0e435c;">(1) #define</h2>
<div align="middle">
<dec><rd>#define</rd>&nbsp;&nbsp;<aa>식별자</aa> ( <bb>대체_목록</bb> )</dec>
</div><br />

* **전처리**과정에서 <dec1><aa>식별자</aa></dec1>가 보이면 모두 <dec1><bb>대체_목록</bb></dec1>로 바꿔줍니다.
* <bb>대체_목록</bb>없이 <dec1><rd>#define</rd>&nbsp;&nbsp;<aa>식별자</aa></dec1>으로 쓰이면 **내용**으로 바꿔주지 않고 단순히 **정의(define)**만 됩니다.<b style="font-size:90%">( 인클루드 가드에 사용)</b>

* * *
<h2 style="color:#0e435c;">(2) #undef</h2>
<div align="middle">
<dec><rd>#undef</rd>&nbsp;&nbsp;<aa>식별자</aa></dec>
</div><br />

* 이미 정의된 <dec1><aa>식별자</aa></dec1>가 있을 경우 없애 줍니다.
<h3 align="middle" style="color:#0e435c;">&lt; 정의 매크로 예시 &gt;</h3>

<kkr>
<rmk>/* A가 정의되어있지 않으면 정의1 */</rmk><br />
<rd>#ifndef</rd> <aa>A</aa><br />
<rd># define</rd> <aa>A</aa> (<bb>0</bb>)<br />
<rd>#endif</rd><br />
<br />
<rmk>/* A가 정의되어있지 않으면 정의2 */</rmk><br />
<rd>#if !defined</rd> (<aa>A</aa>)<br />
<rd># define</rd> <aa>A</aa> (<bb>0</bb>)<br />
<rd>#endif</rd><br />
<br />
<rmk>/* A가 정의되어있다면 정의를 해제1 */</rmk><br />
<rd>#ifdef</rd> <aa>A</aa><br />
<rd># undef</rd> <aa>A</aa><br />
<rd>#endif</rd><br />
<br />
<rmk>/* A가 정의되어있다면 정의를 해제2 */</rmk><br />
<rd>#if definde</rd>(<aa>A</aa>)<br />
<rd># undef</rd> <aa>A</aa><br />
<rd>#endif</rd><br />
<br />
<rmk>/* 인클루드 가드 */</rmk><br />
<rd>#ifndef</rd> <aa>TEST_H</aa><br />
<rd># define</rd> <aa>TEST_H</aa><br />
..헤더 내용..<br />
<rd>#endif</rd><br />
</kkr>

* * *
<h2 style="color:#0e435c;">(3) 미리 정의되어 있는 #define예</h2>

* <b>C언어</b>에는 미리 정의되어 있는 매크로들이 있습니다.
* <b style="color:#06e924;">&#95;&#95;FILE&#95;&#95;</b>: 현재 파일의 이름을 <b>문자열</b>로 표시합니다.
* <b style="color:#06e924;">&#95;&#95;LINE&#95;&#95;</b>: 현재 코드의 <b>줄 번호</b>를 정수형으로 표시합니다.
<h3 align="middle" style="color:#0e435c;">&lt; 오류 출력시 사용 &gt;</h3>

<img src="https://kirkim.github.io/assets/img/c/mecro1.png" alt="err_macro_example" width="100%">
<kkr>
<rmk>/*---출력---*/</rmk><br />
error: test.c, line 5.<br />
</kkr>

* * *
<h2 style="color:#0e435c;">(4) 조건부 컴파일로 이용</h2>

* 대표적인 예시로 `unist.h`헤더의 경우 **윈도우**운영체제에서는 `io.h`헤더로 선언되어 있습니다.
* <b style="color:#06e924;">&#95;WIN32</b>는 <b>32, 64비트 윈도우운영체제</b>를 뜻합니다.
* 즉, 다음과 같이 **윈도우**운영체제일 경우 `io.h`헤더를, 아닐 경우 `unistd.h`헤더를 호출합니다.

<kkr>
<rd>#if defined</rd>(<aa>_WIN32</aa>)<br />
<rd># include</rd> <cc>&lt;io.h&gt;</cc><br />
<rd>#else</rd><br />
<rd># include</rd> <cc>&lt;unistd.h&gt;</cc><br />
<rd>#endif</rd><br />
</kkr>

* * *
<h2 style="color:#0e435c;">(5) 주석으로 이용</h2>

* **매크로**를 이용하여 주석처리를 할 수 있습니다.
* <b style="color:#06e924;">&#47;&#42; &#42;&#47;</b>를 이용하여 주석을 처리할 수 있지만 주석을 지우고 쓰고를 반복할 때 시작과 끝을 까먹을 때가 있습니다.
* 또한 <b style="color:#06e924;">&#47;&#42; &#42;&#47;</b>를 이용한 주석처리는 중첩이 안됩니다.
<h3 align="middle" style="color:#0e435c;">&lt; 매크로 주석 사용 &gt;</h3>
<img src="https://kirkim.github.io/assets/img/c/mecro2.png" alt="err_macro_example" width="80%">
<h3 align="middle" style="color:#0e435c;">&lt; 매크로 주석 해제 &gt;</h3>
<img src="https://kirkim.github.io/assets/img/c/mecro3.png" alt="err_macro_example" width="80%">