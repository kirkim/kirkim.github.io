---
layout: post
title: "[JavaScript] ë¹„ë™ê¸°(asynchronous)"
subtitle: ""
date: 2021-08-20 03:45:51 +0900
categories: javascript
tags: study
comments: true
---

<h1>1ï¸âƒ£ ëª©í‘œ</h1>
<kline></kline>

1. ì½œë°± í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°í•´ë³´ê¸°
2. Promiseì‚¬ìš©ë²• ë°°ìš°ê¸°
3. asyncì‚¬ìš©ë²• ë°°ìš°ê¸°

<h1 class="ksubject">2ï¸âƒ£ ë™ê¸°ì™€ ë¹„ë™ê¸°</h1>
<h2 style="color:#0e435c;">(1) ë™ê¸°(Synchronous)</h2>

- <b class="green">ë™ê¸°</b>í˜• í•¨ìˆ˜ë“¤ë§Œ ìˆìœ¼ë©´ ë‹¨ìˆœíˆ <b class="blue">ì ˆì°¨ì§€í–¥ì </b>ìœ¼ë¡œ ì½”ë“œê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.

```javascript
console.log(1);
console.log(2);
console.log(3);
```

<kkr>
1<br>
2<br>
3<br>
</kkr>

<kline></kline>

<h2 style="color:#0e435c;">(2) ë¹„ë™ê¸°(Asynchronous)</h2>

- ë§Œì•½ <rd>í•˜ë‚˜ì˜ í•¨ìˆ˜</rd>ê°€ ì²˜ë¦¬í•˜ëŠ”ë° **ì‹œê°„ì´ ì˜¤ë˜**ê±¸ë¦°ë‹¤ë©´ ê·¸ë‹¤ìŒë²ˆ ì½”ë“œëŠ” ëë‚ ë•Œê¹Œì§€ **ëŒ€ê¸°** í•˜ê²Œ ë©ë‹ˆë‹¤.
- ì‹¤ì œë¡œ ì„œë²„ì—ì„œ **í´ë¼ì´ì–¸íŠ¸ì˜ ì…ì¶œë ¥(IO)**ì—ì„œ ì§€ì—°ì´ ë§ì´ ë°œìƒí•œë‹¤ê³  í•©ë‹ˆë‹¤. ë§Œì•½ <b class="blue">í´ë¼ì´ì–¸íŠ¸ì˜ ì…ì¶œë ¥ ë¹ˆë„</b>ê°€ ë” ëŠ˜ì–´ë‚œë‹¤ë©´ <rd>ì„œë²„</rd>ëŠ” ë¬´í•œëŒ€ê¸°ìƒíƒœì— ë¹ ì§€ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.
- <h1 class="ksubject">3ï¸âƒ£ call back í•¨ìˆ˜</h1>
  <h2 style="color:#0e435c;">(1) call backí•¨ìˆ˜ ì˜ˆì‹œ(Popcornë©”ì´ì»¤)</h2>

```javascript
class Cooker {
  inspectFood(food, available, onError) {
    console.log("getting food...");
    setTimeout(() => {
      if (food === "ğŸŒ½" || food === "ğŸ¥”") {
        available(food);
      } else {
        onError(new Error("no food available"));
      }
    }, 2000);
  }
  makePopcorn(food, available, onError) {
    console.log("cooking...");
    setTimeout(() => {
      if (food === "ğŸŒ½") {
        available(`${food} => ğŸ¿`);
      } else {
        onError(`${food} => âŒ`);
      }
    }, 2000);
  }
}
```

- ìœ„ì˜ ì½”ë“œëŠ” ë‹¤ìŒì˜ ë©”ì†Œë“œë¥¼ ê°€ì§„ <b class="green">Cooker í´ë˜ìŠ¤</b>ì…ë‹ˆë‹¤.
  1.  <b class="blue">ì‹ì¬ë£Œ</b>ë¥¼ **ìœ íš¨í•œ ì‹ì¬ë£Œì¸ì§€ ê²€ì‚¬**í•˜ëŠ” `inspectFood()`ë©”ì†Œë“œ
  2.  <b class="blue">ì‹ì¬ë£Œ</b>ë¡œ **íŒì½˜ì„ ë§Œë“œëŠ”** `makePopcorn()`ë©”ì†Œë“œ

<kline></kline>

<h2 style="color:#0e435c;">(2) Popcornë©”ì´ì»¤(call back) ì‚¬ìš© í•´ë³´ê¸°</h2>

```javascript
const cooker = new Cooker();
const CORN = "ğŸŒ½";
const POTATO = "ğŸ¥”";
const APPLE = "ğŸ";

const food = CORN; // ì‚¬ìš©ìê°€ ì„ì˜ì˜ ìŒì‹ ì„¤ì •

cooker.inspectFood(
  food,
  (availableFood) => {
    cooker.makePopcorn(
      availableFood,
      (availablePopcorn) => {
        console.log("success!");
        console.log(availablePopcorn);
      },
      (error) => {
        console.log("fail...");
        console.log(error);
      }
    );
  },
  (error) => {
    console.log(error);
  }
);
```

<div class="A-20_out">
	<h3 id="A-20_title">PopcornMaker</h3>
	<div id="A-20_btn">
		<button id="corn"> ğŸŒ½ </button>
		<button id="potato"> ğŸ¥” </button>
		<button id="apple"> ğŸ </button>
	</div>
	<div id="out">
		<span id="base" class="hidden">inspect the food...<br></span>
		<!--corn-->
		<span id="c1" class="hidden">cooking...<br></span>
		<span id="c2" class="hidden">success!<br>ğŸŒ½ => ğŸ¿</span>
		<!--potato-->
		<span id="p1" class="hidden">cooking...<br></span>
		<span id="p2" class="hidden">fail...<br>ğŸ¥” => âŒ</span>
		<!--apple-->
		<span id="a1" class="hidden">Error: no food available<br></span>
	</div>
</div>

- ìœ„ì—ì„œ ğŸŒ½ ì™€ ğŸ¥” ì˜ ê²½ìš° <b>ì¶œë ¥</b>ì„ ë³´ë©´ <b class="purple">ì¬ë£Œë¥¼ ê²€ì‚¬í• ë•Œê¹Œì§€</b> <b>ê¸°ë‹¤ë¦° í›„</b> <b class="green">ìš”ë¦¬ë¥¼ ì‹œì‘ í•©ë‹ˆë‹¤.</b>
- ê²°êµ­ <b class="purple">ì¬ë£Œë¥¼ ê²€ì‚¬ì‹œê°„</b>ì´ <b class="purple">5ì´ˆ</b>, <b class="green">ìš”ë¦¬í•˜ëŠ” ì‹œê°„</b>ì´ <b class="green">6ì´ˆ</b>ë¼ë©´ <b class="red">11ì´ˆ</b>ë¥¼ ê¸°ë‹¤ë¦¬ë©´ <b class="blue">ìš”ë¦¬ ì„±ê³µì—¬ë¶€</b>ë¥¼ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<kline></kline>

<h2 style="color:#0e435c;">(3) Popcornë©”ì´ì»¤(call back)ì˜ ë‹¨ì </h2>

- **ìœ„ì—ì„œ íŒŒì•…í•œ** <b class="blue">Popcornë©”ì´ì»¤</b>ëŠ” ì‚¬ìš©í•˜ëŠ”ë° ìˆì–´ì„œ <b class="red">ê°€ë…ì„±</b>ì´ ë„ˆë¬´ ë–¨ì–´ì§‘ë‹ˆë‹¤. <b style="font-size:85%">(callbackí•¨ìˆ˜ì˜ ì¤‘ì²©...)</b>

<h1 class="ksubject">4ï¸âƒ£ Promise</h1>
<h2 style="color:#0e435c;">(1) </h2>

<script>
	const Form = document.querySelector(".A-20_out");
	const outForm = document.querySelector(".A-20_out #out");
	const cornButton = Form.querySelector("#corn");
	const potatoButton = Form.querySelector("#potato");
	const appleButton = Form.querySelector("#apple");
	const base = document.querySelector(".A-20_out #out #base");
	const corn1 = document.querySelector(".A-20_out #out #c1");
	const corn2 = document.querySelector(".A-20_out #out #c2");
	const potato1 = document.querySelector(".A-20_out #out #p1");
	const potato2 = document.querySelector(".A-20_out #out #p2");
	const apple1 = document.querySelector(".A-20_out #out #a1");
	let timer1;
	let timer2;


	function addHidden() {
		clearTimeout(timer1);
		clearTimeout(timer2);
		corn1.classList.add("hidden");
		corn2.classList.add("hidden");
		potato1.classList.add("hidden");
		potato2.classList.add("hidden");
		apple1.classList.add("hidden");
	}

	function inputCorn() {
		addHidden();
		base.classList.remove("hidden");
		timer1 = setTimeout(() => {
			corn1.classList.remove("hidden");
		}, 2000);
		timer2 = setTimeout(() => {
			corn2.classList.remove("hidden");
		}, 4000);
	}

	function inputPotato() {
		addHidden();
		base.classList.remove("hidden");
		timer1 = setTimeout(() => {
			potato1.classList.remove("hidden");
		}, 2000);
		timer2 = setTimeout(() => {
			potato2.classList.remove("hidden");
		}, 4000);
	}

	function inputApple() {
		addHidden();
		base.classList.remove("hidden");
		timer1 = setTimeout(() => {
			apple1.classList.remove("hidden");
		}, 2000);
	}

	cornButton.addEventListener("click", inputCorn);
	potatoButton.addEventListener("click", inputPotato);
	appleButton.addEventListener("click", inputApple);
</script>

<style>
	.A-20_out {
	  display: flex;
	  align-items: center;
	  flex-direction: column;
	}
	.A-20_out #out {
	  padding-left: 6px;
	  color: white;
	  width: 50%;
	  height: 140px;
	  background-color: rgb(42, 44, 48);
	}

	#A-20_title {
	  padding-left: 3px;
	  padding-right: 3px;
	  width: 50%;
	  margin: 0px;
	  text-align: center;
	  background-color: rgb(183, 252, 73);
	}

	#A-20_btn {
	  display: flex;
  	  justify-content: space-around;
	  padding-left: 3px;
	  padding-right: 3px;
	  background-color: rgb(200, 229, 186);
	  width: 50%;
	}

	.A-20_out button {
	  font-size: 30px;
	  background-color: transparent;
	  border: none;
	  outline: none;
	  cursor: pointer;
	  transition: transform 300ms ease;
	}

	.A-20_out button:hover {
	  transform: scale(1.2);
	}

	.hidden {
	  display: none;
	}
</style>
