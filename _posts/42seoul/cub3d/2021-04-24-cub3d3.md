---
layout: post
title:  "[cub3d](3)2D지도 구현(javascript)"
subtitle:   ""
date: 2021-04-24 02:45:51 +0900
categories: 42seoul
tags: cub3d
comments: true 
---

* * *
<h1>1️⃣ 자바스크립트를 이용한 레이케스팅 구현</h1>
<h2 style="color:#0e435c;">(1) 자바스크립트로 먼저 구현하는 이유</h2>

* 최종적으로 **cub3d과제**를 **C언어**를 이용하여 구현할 예정입니다.
* 그러나 <b>C언어</b>로 처음부터 구현을 하게 되면 다소 어려울 수 있습니다. 그렇기 때문에 <rd>자바스크립트</rd>를 이용하여 먼저 구현한 뒤 <rd>C언어</rd>로 다시 구현할 예정입니다.
* <b><rd>자바스크립트</rd><b>의 특징으로는
    1. <b><rd>인터프리터 언어</rd></b>이기 때문에 동작을 확인해 가면서 프로그램을 개발할 수 있습니다.
    2. <b><rd>동적 타입 언어</rd></b>이기 때문에 당장에 자료형을 신경쓸 필요가 없습니다.
    3. <b><rd>객체 지향 언어</rd></b>이기 때문에 캡슐화, 추상화, 상속성등 장점이 있습니다.
* 결론적으로 빠르게 <b>가시적</b>으로 프로그램을 구성할 수 있기 때문에 <b>레이케스팅</b>에 대해 이해하기가 좀 더 수월해질 것 입니다.
<h2 style="color:#0e435c;">(2) p5.js</h2>

* <b><rd>p5.js</rd></b>를 이용하여 레이케스팅을 구현할 계획입니다.
* <b><rd>p5.js</rd></b>란 <b>"Lauren McCarthy"</b>에 의해 자바스크립트로 만들어진 새로운 라이브러리입니다.
<a href="http://staging.p5js.org/" target="blank"> &gt;&gt;(p5.js 사이트)</a>

* p5.js는 다양한 <rd>드로잉 기능</rd>을 제공하며, 인터넷 브라우저 전체를 스케치북 삼아 그릴 수 있을 뿐 아니라, 텍스트, 입력, 비디오, 웹캠, 그리고 사운드 등을 비롯한 각종 HTML 요소를 사용할 수 있습니다.
* **p5.js**강의도 존재할 만큼 유명한 툴입니다.

<h2 style="color:#0e435c;">(3) 레이케스팅 프로그램</h2>
<img src="https://kirkim.github.io/assets/img/cub3d/cub13.png" alt="raycasting_files" width="100%" style="margin-top:3%">

* <b style="color:#3d94f8;">&lt;index.html&gt;</b>:<b>css파일, js파일</b>을 모아 출력하는 용도로 사용할 파일입니다.
* <b style="color:#3d94f8;">&lt;styles.css&gt;</b>: 약간의 디자인을 보충해 줍니다.
* <b style="color:#3d94f8;">&lt;p5.js&gt;</b>: <b>p5</b>의 라이브러리가 담긴 파일입니다.
* <b style="color:#3d94f8;">&lt;raycast.js&gt;</b>: 앞으로 구현할 레이케스팅코드가 들어가게 됩니다.
* `html`파일을 실행하는 방법에 대해서는 다음 포스트에 정리해두었습니다.
<a href="https://kirkim.github.io/javascript/2021/04/09/sample.html" target="blank"> &gt;&gt;&gt;&gt;html작성 환경 만들기</a>
* <b><rd>Live Server</rd></b> 작업툴을 이용하여 `html`파일을 실행했습니다.

<h2 style="color:#0e435c;">(4) raycast.js</h2>

* 자세한 <b>파일의 코드</b>는 <a href="https://pikuma.com/" target="blank"> &gt;&gt;PIKUMA</a>사이트의 <b>레이케스팅 강의</b>에서 볼 수 있습니다.
* 이 파일에 구현할 기능은 다음과 같습니다.
    * <b style="color:#3d94f8;">&lt; setup() &gt;</b>: 모든 오브젝트들을 초기화하는 기능
    * <b style="color:#3d94f8;">&lt; update() &gt;</b>: 다음 프레임으로 넘어갈 때 업데이트해주는 기능
    * <b style="color:#3d94f8;">&lt; draw() &gt;</b>: 프레임마다 렌더링을 해주는 기능
    * <b style="color:#3d94f8;">&lt; Map클래스(class) &gt;</b>: 지도의 디자인을 담당하는 클래스
* 여기서 <rd>렌더링</rd>은 컴퓨터 프로그램을 사용하여 모델 또는 이들을 모아놓은 장면인 씬 파일(scene file)로부터 영상을 만들어내는 과정을 말합니다.
<br /><br />

* * *
<h1>2️⃣ 2D 지도 구현</h1>
<h2 style="color:#0e435c;">(1) 2D부터 구현?</h2>

* 레이케스팅은 <b>2D</b>상의 동작을 <b>가상의 3D환경</b>보여줄 뿐입니다.
* 그렇기 때문에 <b>2D</b>지도와 동작을 먼저 구현하면 레이케스팅의 절반이상 과정이 끝난(?)거라고 할 수 있습니다.

<h2 style="color:#0e435c;">(2) 2D지도</h2>

* <b>2D</b>지도는 <rd>이차원 배열</rd>을 이용하여 기본 틀을 만드는 것이 가독성면에서도 좋습니다.
* 요소로 `1(벽이 있을때)`와 `0(벽이 없을때)`로 구성했습니다.
<img src="https://kirkim.github.io/assets/img/cub3d/cub14.png" alt="grid_array" width="80%" style="margin-top:3%">
* 각각의 벽은 <b>화면 해상도</b>를 고려해서 <rd>적당한 크기</rd>로 만들어주며 <rd>적절한 색</rd>을 입혀줍니다.<b style="font-size:90%">( p5.js 라이브러리를 이용하여 쉽게 구현이 가능합니다.)</b>
<img src="https://kirkim.github.io/assets/img/cub3d/cub15.png" alt="2D_map" width="80%" style="margin-top:3%">
